<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="../static/css/EnlighterJS.custom.css">
  <link rel="stylesheet" href="../static/css/fonts.css">
  <link rel="stylesheet" href="../static/css/interactive.css">
  <link rel="stylesheet" href="../static/css/public.css">
  <link rel="stylesheet" href="../static/css/style.css">
  <link rel="stylesheet" href="../static/css/style(1).css">
  <link rel="stylesheet" href="../static/css/style(2).css">
  <link rel="stylesheet" href="../static/css/shCore.css">
  <link rel="stylesheet" href="../static/css/shThemeDefault.css">
  <link rel="stylesheet" href="../static/css/woff2.css">
  <link rel="stylesheet" href="../static/css/wpProQuiz_front.min.css">
  <script src="../static/js/mootools-core-yc.js"></script>
  <script src="../static/js/jquery.js"></script>
  <script src="../static/js/jquery-migrate.min.js"></script>
  <script src="../static/js/jquery.ui.touch-punch.min.js"></script>
  <script src="../static/js/core.min.js"></script>
  <script src="../static/js/general.min.js"></script>
  <title>FIT2081</title>
</head>
<body>
<div class="square-box">
<h4>Q) Shared Preferences saves primitive data types only. How can I save an array of objects in shared preferences?</h4>
<h4>A) Convert the array of objects into a string using Gson.</h4>
</div>
<h1>Gson</h1>
<br>

Gson is a Java library that can be used to convert Java Objects into their JSON representation. It can also be used to convert a JSON string to an equivalent Java object. Gson can work with arbitrary Java objects including pre-existing objects that you do not have source-code of.Â Gson provides simple toJson() and fromJson() methods to convert Java objects to JSON and vice-versa.

<br>

Add dependency
<pre class="EnlighterJSRAW" data-enlighter-language="generic">dependencies {
  implementation 'com.google.code.gson:gson:2.8.6'
}</pre>
<br>

Create a new instance of Gson
<pre class="EnlighterJSRAW" data-enlighter-language="java">Gson gson = new Gson();</pre>
<br>

Now, let's assume you have an array of objects
<pre class="EnlighterJSRAW" data-enlighter-language="java">ArrayList&lt;Item&gt; db = new ArrayList&lt;&gt;();
db.add(item1);
db.add(item2);
db.add(item3);
</pre>
<br>

Convert the ArrayList object into as string (i.e. json)
<pre class="EnlighterJSRAW" data-enlighter-language="null">String dbStr = gson.toJson(db);</pre>
<br>

Now, you can push the string into your database (or shared preferences)
<pre class="EnlighterJSRAW" data-enlighter-language="null">SharedPreferences.Editor edit = sP.edit();
edit.putString(DB_KEY, dbStr);
edit.apply();</pre>
<br>

Now, let's convert the string back to the ArrayList data type
<pre class="EnlighterJSRAW" data-enlighter-language="java">Type type = new TypeToken&lt;ArrayList&lt;Item&gt;&gt;() {}.getType();
db = gson.fromJson(dbStr,type);</pre>
The method <strong>fromJson</strong> converts the data type of the first parameter into the type that is specified in the second parameter.

<br>

<script src="../static/js/EnlighterJS.min.js"></script>
<script src="../static/js/EnlighterJS.init.js"></script>
<script src="../static/js/widget.min.js"></script>
<script src="../static/js/mouse.min.js"></script>
<script src="../static/js/wp-embed.min.js"></script>
<script src="../static/js/sortable.min.js"></script>
<script type="text/javascript"
   src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js">
</script>
<script src="../static/js/polyfill.min.js"></script>
<script src="../static/js/raygun.min.js"></script>
<script src="../static/js/raygun-misc.js"></script>
<script src="../static/js/wp-emoji-release.min.js"></script>
<script src="../static/js/wpProQuiz_front.min.js"></script>
<script src="../static/js/wpProQuiz_toplist.min.js"></script>
</body>
</html>